<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<body>
   <div id="message">ここ</div>
   <script>
      // iframe要素のウィンドウを取得する
      // var targetWindow = document.getElementById( "hoge" ).contentWindow ;	// Window

      // このウィンドウから、相手のウィンドウ(targetWindow)に向けてメッセージを送信する (オリジンを指定)
      // targetWindow.postMessage( "Hello!!", "https://test.com" ) ;



      // コールバック関数
      var myFunction = function ( event ) {
         // 送信側のオリジン
         var origin = event.origin ;

         // 信頼できるオリジン以外からのメッセージを無視する (重要)
         // if( origin !== "https://test.com" ) return false ;

         // 送られてきたメッセージ
         var message = event.data ;	// "Hello!!"
         console.log( "メッセージを受信しました!! → " + message ) ;
         // id="message"のdiv要素にメッセージを表示する
         document.getElementById( "message" ).innerHTML = "メッセージを受信しました!! → " + message ;
      }

      // イベントを設定する (addEventListener)
      addEventListener( "message", myFunction ) ;




   </script>
</body>
</html>